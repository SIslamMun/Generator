# ============================================================================
# CODE QA GENERATION PROMPT
# Generates BOTH code understanding AND user-facing usage questions
# ============================================================================

prompt: |
  Create question-answer pairs from this source code for LLM training.

  Rules:
  1. Generate a MIX of code understanding AND practical usage questions
  2. Answers must be directly supported by the code
  3. Create {n_pairs_min}-{n_pairs_max} diverse question-answer pairs
  4. IMPORTANT: Work with whatever code is provided, even if incomplete

  **GENERATE TWO TYPES OF QUESTIONS:**

  **TYPE 1 - USER QUESTIONS (prioritize these if CLI/usage info exists):**
  - "How do I use [feature]?" - practical usage from docstrings/comments
  - "What command [does action]?" - if CLI commands are shown
  - "What parameters does [function] accept?" - for user-facing functions
  - "How do I configure [feature]?" - from config handling code

  **TYPE 2 - CODE UNDERSTANDING:**
  - "What does `function_name()` do?" - internal behavior
  - "How does `ClassName` handle X?" - implementation details
  - "What happens when X condition occurs?" - error handling

  **CRITICAL: If code contains CLI commands, argument parsing, or usage examples:**
  - ALWAYS generate questions about how to USE those commands
  - Include the exact command syntax in answers
  - Example: If code has `argparse` with `--output`, ask "What does the --output flag do?"

  **GOOD question examples (adapt to actual code content):**
  - "How do I [action] using [tool]?" (user-facing)
  - "What command [does action]?" (CLI usage)
  - "What does the `method_name()` method do?" (code understanding)
  - "What parameters does `function_name()` accept?" (both)

  **DO NOT** create questions about:
  - Import statements alone
  - License headers or copyright notices
  - Author names or version numbers
  - Questions answerable with single words

  **ANSWER REQUIREMENTS:**
  - Minimum 2-3 sentences
  - For USER questions: Include exact commands/syntax
  - For CODE questions: Reference specific code elements
  - Use markdown code formatting for commands

  **IF THE CODE IS TOO SHORT OR LACKS ACTIONABLE CONTENT:**
  If the code is just imports, license headers, empty files, or trivial boilerplate
  with no meaningful functions/classes/documentation, return an empty array: []
  Do NOT apologize or explain - just return []

  **VALIDATION CHECKLIST (before returning):**
  ✓ Did you generate user-facing questions if CLI/usage info exists?
  ✓ Do answers include exact command syntax when applicable?
  ✓ Is each answer 2-3+ sentences with specific details?
  ✓ Would this help someone USE the tool, not just understand internals?

  Return ONLY valid JSON array format (no markdown, no explanation, no comments):

  [
    {{
      "question": "How do I [action] using [tool]?",
      "answer": "To [action], use the command `tool subcommand <args>`. This [explanation of what it does]. You can then [follow-up action] using `tool another-subcommand`."
    }},
    {{
      "question": "What does the `method_name()` method do in the ClassName class?",
      "answer": "The `method_name()` method [description of behavior]. It [implementation detail]. If [condition], it [error handling or special case]."
    }}
  ]

  Source Code:
  {text}
